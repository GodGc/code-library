# React

å®˜æ–¹ç½‘ç«™ï¼š<https://react.docschina.org/docs/hello-world.html>

React å°ä¹¦ï¼š <http://huziketang.mangojuice.top/books/react/>

## å¸¸è§å†…å®¹

1.React å¹³æ—¶æ€ä¹ˆç»‘å®šäº‹ä»¶çš„ï¼Ÿå‡½å†…ç»‘å®šå’Œæˆå‘˜çš„ç®­å¤´å‡½æ•°ç»‘å®šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¦‚æœæ˜¯åœ¨ `constructor`é‡Œ bind ç»‘å®šå‘¢ï¼Ÿ

- åœ¨renderä¸­çš„å…ƒç´ å¤„ç»‘å®šäº‹ä»¶ï¼Œåˆ†åˆ«ï¼šç»‘å®šå‡½æ•°å¼ç»‘å®šä¸€ä¸ªç®­å¤´å‡½æ•°ã€bindå‡½æ•°ã€`constructor`æ—¶bindå‡½æ•°ï¼›
- å‡½æ•°å†…ç»‘å®šï¼šç›¸å½“äºåœ¨domå¤„ç»‘å®šï¼Œå› ä¸ºéƒ½æ˜¯åœ¨renderä¸­ï¼Œæ‰€ä»¥æ¯ä¸€æ¬¡renderéƒ½æ˜¯æ‰§è¡Œä¸€æ¬¡bindå‡½æ•°ï¼ˆæ‰§è¡Œå¼€é”€ï¼‰
- ç®­å¤´å‡½æ•°ç»‘å®šï¼šæ¯æ¬¡renderæ—¶ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ç®­å¤´å‡½æ•°ï¼ˆåˆ›å»ºå¼€é”€ï¼‰
- å¦‚æœæ˜¯åœ¨`constructor`ä¸­bindç»‘å®šï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œä¸­å®ƒåªåœ¨æ„é€ å‡½æ•°ä¸­æ¸²æŸ“ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯ å®ä¾‹åŒ–çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ï¼Œåªä¸€æ¬¡ã€‚

2.React å¸¸ç”¨çš„ hook æœ‰ä»€ä¹ˆï¼Ÿ

- `useState`: `const [count, setCount] = useState(0)`
- `useEffect`
- `useCallback`
- `useRef`
- `useMemo`

3.`useMemo` å¹³æ—¶éƒ½æ€ä¹ˆç”¨çš„ï¼Ÿ

4.å¹³æ—¶åšè¿‡å“ªäº› React ä¼˜åŒ–ï¼Ÿæ€ä¹ˆå®šä½é—®é¢˜ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿ

- ä½¿ç”¨`Memo`ä¼˜åŒ–æ— éœ€æ¯æ¬¡éƒ½è¦æ¸²æŸ“çš„ç»„ä»¶

5.hook è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿä¸ºä»€ä¹ˆæœ‰ hook

å®ƒçš„å‡ºç°è®©å‡½æ•°ç»„ä»¶æ‹¥æœ‰äº†ç±»ä¼¼classç»„ä»¶çš„èƒ½åŠ›ï¼ˆç”Ÿå‘½å‘¨æœŸç­‰ï¼‰ï¼ŒåŒæ—¶ä¹Ÿä¼˜åŒ–äº†ä¸€äº›è¿‡å»çš„ç¼ºç‚¹

6.äº†è§£åˆæˆäº‹ä»¶å—ï¼Ÿæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆéœ€è¦åˆæˆäº‹ä»¶ï¼Ÿï¼ˆè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿï¼‰

- React åˆæˆäº‹ä»¶:
    Reactæœ‰è‡ªå·±çš„ä¸€å¥—äº‹ä»¶å¤„ç†æœºåˆ¶ï¼Œé€šè¿‡åˆæˆäº‹ä»¶çš„æœºåˆ¶å®ç°äº‹ä»¶å¤„ç†ã€‚
    Reactå¹¶æ²¡æœ‰æŠŠ`on*`äº‹ä»¶ç›´æ¥æŒ‚è½½åœ¨çœŸå®DOMä¸Šï¼Œè€Œæ˜¯åœ¨documentå¤„ç›‘å¬æ‰€æœ‰æ”¯æŒçš„äº‹ä»¶ï¼Œå½“äº‹ä»¶å‘ç”Ÿå¹¶ä¸”å†’æ³¡=>documentå¤„ï¼ŒReactå°†äº‹ä»¶å†…å®¹è¿›è¡Œå°è£…å¹¶äº¤ç”±çœŸæ­£çš„å¤„ç†å‡½æ•°è¿è¡Œã€‚
    å°è£…çš„è¿™ä¸€æ­¥å°±æ˜¯åœ¨ï¼š`syntheticEvent äº‹ä»¶æ± `å¤„
    ![react-event](https://tva1.sinaimg.cn/large/00831rSTgy1gcgrfyk903j30y00esads.jpg)
    > SyntheticEvent æ˜¯åˆå¹¶è€Œæ¥ã€‚è¿™æ„å‘³ç€ SyntheticEvent å¯¹è±¡å¯èƒ½ä¼šè¢«é‡ç”¨ï¼Œè€Œä¸”åœ¨äº‹ä»¶å›è°ƒå‡½æ•°è¢«è°ƒç”¨åï¼Œæ‰€æœ‰çš„å±æ€§éƒ½ä¼šæ— æ•ˆã€‚å‡ºäºæ€§èƒ½è€ƒè™‘ï¼Œä½ ä¸èƒ½é€šè¿‡å¼‚æ­¥è®¿é—®äº‹ä»¶ã€‚
- ä¸ºä»€ä¹ˆéœ€è¦åˆæˆäº‹ä»¶ï¼š
    å¦‚æœDOMä¸Šç»‘å®šäº†è¿‡å¤šçš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œæ•´ä¸ªé¡µé¢å“åº”ä»¥åŠå†…å­˜å ç”¨å¯èƒ½éƒ½ä¼šå—åˆ°å½±å“ã€‚
    é¿å…DOMäº‹ä»¶æ»¥ç”¨ï¼ŒåŒæ—¶ç¡®ä¿å¤šç«¯æµè§ˆå™¨äº‹ä»¶å¤„ç†æœºåˆ¶ç»Ÿä¸€ï¼ˆå…¼å®¹æ€§ï¼‰ï¼ŒReactåˆ™ä½¿ç”¨SyntheticEventè¿›è¡Œäº†ä¸­é—´å±‚æ¥ç®¡,åœ¨äº‹ä»¶åˆæˆå±‚è¿›è¡Œå¤„ç†
- å¦‚ä½•åœ¨Reactä½¿ç”¨åŸç”Ÿäº‹ä»¶
    åŸç”Ÿäº‹ä»¶éœ€è¦ç»‘å®šåœ¨çœŸå®çš„DOMä¸Šï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™DOMéœ€è¦è¢«æ¸²æŸ“å‡ºæ¥ï¼Œåœ¨å£°æ˜å‘¨æœŸ `componentDidMount` è¿›è¡Œç»‘å®š

    ```javascript
    class Demo extends React.PureComponent {
        componentDidMount (){
            const $this = ReactDom.findDomNode(this);
            $this.addEventListener('click', this.onDomClick, false);
        }
        
        onDomClick = ()=>{
            //...
        }
        
        render () {
            return (
                <div>Demo Div</div>
            )
        }
    }
    ```

- å¦‚ä½•åœ¨Reactä¸­ åˆæˆäº‹ä»¶å’ŒåŸç”Ÿäº‹ä»¶ æ··ç”¨

    ```javascript
        class Demo extends React.PureComponent {
            componentDidMount() {
                const $this = ReactDOM.findDOMNode(this)
                $this.addEventListener('click', this.onDOMClick, false)
            }

            onDOMClick = evt => {
                console.log('dom event')
            }

            onClick = evt => {
                console.log('react event')
            }

            render() {
                return (
                    <div onClick={this.onClick}>Demo</div>
                )
            }
        }

    ```

    å“åº”é¡ºåºï¼šDOMçœŸå®äº‹ä»¶è§¦å‘=>å†’æ³¡è‡³document=>Reactåˆæˆäº‹ä»¶
    é˜»æ­¢å†’æ³¡ï¼Œå¦‚æœåœ¨DOMåŸç”Ÿäº‹ä»¶ä¸Šé˜»æ­¢å†’æ³¡`event.stioPropagation()`ï¼Œé‚£ä¹ˆåˆæˆäº‹ä»¶å°±ä¸ä¼šè§¦å‘äº†

7.å¾ªç¯é‡Œçš„ key æœ‰ä»€ä¹ˆç”¨ï¼Ÿä¸ºä»€ä¹ˆä¸€å®šè¦åŠ ï¼Ÿ

å‡å°‘diffç®—æ³•æ—¶å¯¹æ¯”virtual dom çš„å¼€é”€ï¼Œä»¥åŠé¿å…æ¸²æŸ“æ—¶å‘ç”Ÿæ„å¤–æƒ…å†µï¼Œæ¯”å¦‚domèŠ‚ç‚¹æ„å¤–ä¸æ›´æ–°ç­‰

8.å¹³æ—¶çŠ¶æ€ç®¡ç†å·¥å…·ç”¨ä»€ä¹ˆï¼Ÿæ€ä¹ˆé€‰å‹çš„ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿredux å’Œ mobx ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

- å¹³æ—¶ä½¿ç”¨reduxï¼Œæ ¹æ®ç†Ÿæ‚‰ç¨‹åº¦è¿›è¡Œé€‰æ‹©å³å¯ï¼Œæ²¡æœ‰ä»€ä¹ˆå¿…é¡»æ˜¯è¦ç”¨çš„

- ç®¡ç†æ•°æ®çš„æ–¹å¼ä¸åŒï¼Œreduxæ˜¯é€šè¿‡å•é¡¹æ•°æ®æµçš„fluxæ€æƒ³æ„å»ºçš„ï¼Œmobxåˆ™ä¸æ˜¯

9.ä»€ä¹ˆæ˜¯é«˜é˜¶ç»„ä»¶ï¼Ÿ

é«˜é˜¶ç»„ä»¶HOCï¼Œç®€å•è®²å°±æ˜¯å°†ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ä¼ å…¥å¦å¤–ä¸€ä¸ªç»„ä»¶ï¼Œåœ¨è¿™ä¸ªç»„ä»¶å†…å¯¹å…¶è¿›è¡ŒæŸäº›æ“ä½œåï¼Œå†è¿”å›è¿™ä¸ªç»„ä»¶

10.redux çš„ connect æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆéœ€è¦ connectï¼Ÿ

å†…éƒ¨ç»„ä»¶connectè¿›è¡Œè¿æ¥ï¼Œå®ƒæ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°HOCï¼Œåœ¨reduxå†…éƒ¨è¿›è¡Œhookï¼Œç„¶åæ ¹æ®ä½ æä¾›çš„`mapStateToProps`å–å‡ºæ•´ä¸ªstateï¼Œä¾›ä½ ä½¿ç”¨

11.PureComponent å’Œ React.memo æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

12.context æ˜¯ä»€ä¹ˆï¼Ÿç”¨è¿‡å—ï¼Ÿæ€ä¹ˆç”¨çš„ï¼Ÿ

13.ref ç”¨è¿‡å—ï¼Ÿä»€ä¹ˆåœºæ™¯ï¼Ÿ

refå¯ä»¥è·å–domèŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œå¯ä»¥ç”¨æ¥è·å–domé«˜åº¦ï¼Œinputè‡ªåŠ¨èšç„¦ç­‰ã€‚

14.react-router åŸç†æ˜¯ä»€ä¹ˆï¼Ÿå’Œ vue-router ä»€ä¹ˆåŒºåˆ«ï¼Ÿä»€ä¹ˆæ˜¯åŠ¨æ€è·¯ç”±ï¼Œä»€ä¹ˆæ˜¯é™æ€è·¯ç”±ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

15.setState ä»€ä¹ˆæ—¶å€™æ˜¯å¼‚æ­¥ï¼Œä»€ä¹ˆæ—¶å€™æ˜¯åŒæ­¥ï¼Ÿ

- React å…¶å®ä¼šç»´æŠ¤ç€ä¸€ä¸ª state çš„æ›´æ–°é˜Ÿåˆ—ï¼Œæ¯æ¬¡è°ƒç”¨ setState éƒ½ä¼šå…ˆæŠŠå½“å‰ä¿®æ”¹çš„ state æ¨è¿›è¿™ä¸ªé˜Ÿåˆ—ï¼Œåœ¨æœ€åï¼ŒReact ä¼šå¯¹è¿™ä¸ªé˜Ÿåˆ—è¿›è¡Œåˆå¹¶å¤„ç†ï¼Œç„¶åå»æ‰§è¡Œå›è°ƒã€‚æ ¹æ®æœ€ç»ˆçš„åˆå¹¶ç»“æœå†å»èµ°ä¸‹é¢çš„æµç¨‹ï¼ˆæ›´æ–°è™šæ‹Ÿdomï¼Œè§¦å‘æ¸²æŸ“ï¼‰ã€‚
- `setTimeout`ä¸­è°ƒç”¨ä»¥åŠåŸç”Ÿäº‹ä»¶ä¸­è°ƒç”¨çš„è¯ï¼Œæ˜¯å¯ä»¥ç«‹é©¬è·å–åˆ°æœ€æ–°çš„stateçš„ã€‚æ ¹æœ¬åŸå› åœ¨äºï¼ŒsetStateå¹¶ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„å¼‚æ­¥æ“ä½œï¼Œå®ƒåªæ˜¯æ¨¡æ‹Ÿäº†å¼‚æ­¥çš„è¡Œä¸ºã€‚Reactä¸­ä¼šå»ç»´æŠ¤ä¸€ä¸ªæ ‡è¯†ï¼ˆ`isBatchingUpdates`ï¼‰ï¼Œåˆ¤æ–­æ˜¯ç›´æ¥æ›´æ–°è¿˜æ˜¯å…ˆæš‚å­˜stateè¿›é˜Ÿåˆ—ã€‚`setTimeout`ä»¥åŠåŸç”Ÿäº‹ä»¶éƒ½ä¼šç›´æ¥å»æ›´æ–°stateï¼Œå› æ­¤å¯ä»¥ç«‹å³å¾—åˆ°æœ€æ–°stateã€‚è€Œåˆæˆäº‹ä»¶å’ŒReactç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­ï¼Œæ˜¯å—Reactæ§åˆ¶çš„ï¼Œå…¶ä¼šå°†`isBatchingUpdates`è®¾ç½®ä¸º`true`ï¼Œä»è€Œèµ°çš„æ˜¯ç±»ä¼¼å¼‚æ­¥çš„é‚£ä¸€å¥—ã€‚
- **æ€»ç»“ï¼š**
  - `setState` åœ¨åˆæˆäº‹ä»¶ã€é’©å­å‡½æ•°ä¸­æ˜¯â€œä¼ªå¼‚æ­¥â€çš„ï¼Œåœ¨åŸç”Ÿäº‹ä»¶å’Œ`setTimeout`ä¸­éƒ½æ˜¯åŒæ­¥çš„
  - `setState` çš„**ä¼ªå¼‚æ­¥**å¹¶ä¸æ˜¯é€šè¿‡å¼‚æ­¥ä»£ç å®ç°çš„ï¼Œè€Œæ˜¯å› ä¸ºåˆæˆäº‹ä»¶ã€é’©å­å‡½æ•°çš„è°ƒç”¨é¡ºåºåœ¨æ›´æ–°ä¹‹å‰ï¼Œå¯¼è‡´åˆæˆäº‹ä»¶å’Œé’©å­å‡½æ•°æ²¡æ³•ç«‹åˆ»æ‹¿åˆ°æ›´æ–°åçš„å€¼ï¼Œå½¢æˆäº†ä¼ªå¼‚æ­¥
  - `setState`çš„æ‰¹é‡æ›´æ–°ä¹Ÿæ˜¯å»ºç«‹åœ¨â€œä¼ªå¼‚æ­¥â€ï¼ˆåˆæˆäº‹ä»¶ã€é’©å­å‡½æ•°ï¼‰ä¹‹ä¸Šçš„ï¼Œåœ¨åŸç”Ÿäº‹ä»¶å’Œ`setTimeout`ä¸­ä¸ä¼šæ‰¹é‡æ›´æ–°ã€‚å¦‚æœåœ¨â€œä¼ªå¼‚æ­¥â€ä¸­å¯¹åŒä¸€ä¸ªå€¼è¿›è¡Œå¤šæ¬¡`setState`ï¼Œ`setState`çš„**æ‰¹é‡æ›´æ–°ç­–ç•¥**ä¼šå¯¹å…¶è¿›è¡Œè¦†ç›–ï¼Œå–æœ€åä¸€æ¬¡æ‰§è¡Œï¼›å¦‚æœåŒæ—¶`setState`å¤šä¸ªä¸åŒçš„å€¼ï¼Œåœ¨æ›´æ–°æ—¶ä¼šå¯¹å…¶è¿›è¡Œåˆå¹¶æ‰¹é‡æ›´æ–°ã€‚

16.ä¸ºä»€ä¹ˆä¸€å®šè¦ super(props)

- JavaScriptä¸­ï¼Œ`super`æ˜¯çˆ¶ç±»`constructor`çš„å¼•ç”¨ã€‚
- å¦‚æœä¸`super(props)`ï¼Œæ˜¯æ— æ³•æ­£å¸¸ä½¿ç”¨`this`çš„ => `undefined`
- ä¸€å®šè¦ä¼ `props`å—ï¼Ÿå¦‚æœåª`super()`å¯ä»¥å—ï¼Ÿ
  - å¯ä»¥ï¼Œä½†æ˜¯ä¸å»ºè®®ï¼Œå› ä¸ºReactå¦‚æœå‘ç°æˆ‘ä»¬æ²¡æœ‰åœ¨superä¸­ä¼ propsï¼Œé‚£ä¹ˆå®ƒä¼šæ›¿æˆ‘ä»¬çš„ç»„ä»¶è®¾ç½®`props`å±æ€§ï¼Œè™½ç„¶`props`å¯ä»¥æ‹¿åˆ°å€¼ï¼Œä½†æ˜¯`this.props`åœ¨`constructor`ä¸­å´ä¼šä¸€ç›´éƒ½ä¼šæ˜¯`undefined`

```javascript
// Inside React 
class Component { 
    constructor(props) { 
    this.props = props; 
    // ...
    } 
} 

// Inside your code 
class Button extends React.Component { 
    constructor(props) { 
        super(); // ğŸ˜¬ We forgot to pass props 
        console.log(props); // âœ… {} 
        console.log(this.props); // ğŸ˜¬ undefined 
    } 
    // ... 
}

class Button extends React.Component { 
    constructor(props) { 
        super(props); // âœ… We passed props 
        console.log(props); // âœ… {} 
        console.log(this.props); // âœ… {} 
    } 
    // ... 
}

```

>ps:å½“æœ‰äº†class å±æ€§ææ¡ˆ(class fields proposal)ï¼Œå¤§éƒ¨åˆ†çš„å‘éƒ½ä¼šæ¶ˆå¤±ã€‚åœ¨æ²¡æœ‰æ ‡æ˜constructorçš„æƒ…å†µä¸‹ï¼Œå…¨éƒ¨å‚æ•°ä¼šè¢«è‡ªåŠ¨ä¼ å…¥ã€‚è¿™æ ·å°±å…è®¸åƒstate = {}çš„è¡¨è¾¾å¼ï¼Œå¦‚æœæœ‰éœ€è¦this.propsæˆ–è€…this.contextå°†åŒæ ·é€‚ç”¨ã€‚Hooksä¸­ï¼Œæˆ‘ä»¬ç”šè‡³ä¸éœ€è¦superæˆ–è€…thisã€‚

```javascript
// æ—§ç‰ˆ
class Checkbox extends React.Component { 
    constructor(props) { 
        super(props); 
        this.state = { isOn: true }; 
    } 
    // ... 
}

// classå±æ€§ææ¡ˆå
class Checkbox extends React.Component { 
    state = { isOn: true }; 
    // ... 
}
```

17.React æ˜¯å¦‚ä½• rerender çš„ï¼Ÿï¼ˆå¾—ç•¥æ‡‚æºç ï¼Œæ¯”å¦‚ diff vdomï¼Œç„¶ååˆ¤æ–­æ˜¯å¦è¦ renderï¼‰

18.mobx å’Œ redux åŸç†æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆä½ å·¥ä½œç”¨ä»€ä¹ˆå°±çœ‹ä»€ä¹ˆï¼Œæœ‰æ—¶é—´å°±éƒ½æŒæ¡ï¼‰

19.React æ˜¯å¦‚ä½• diffçš„ï¼Ÿä»€ä¹ˆæ ·çš„ç­–ç•¥ï¼Ÿ

20.fiber æ˜¯ä»€ä¹ˆï¼Ÿ

21.React çš„ä¸€äº›TSç±»å‹é—®é¢˜ã€‚`React.Element`/`React.ComponentType`/`React.ReactNode`/`JSX.Element`/`Element`
æ„å»º react

22.å¦‚ä½•ç”¨jsè¡¨ç¤ºä¸€ä¸ªdom

```javascript
{
    tag: 'div',
    attrs: { className:'box', id: 'content' },
    children: [
        {
            tag: 'div',
            attrs:{ className: 'title'},
            children: ['Hello']
        },
        {
            tag: 'button',
            attrs: null,
            children: ['Click']
        }
    ]
}

// è¡¨ç¤ºçš„æ˜¯ï¼š
<div class='box' id='content'>
  <div class='title'>Hello</div>
  <button>Click</button>
</div>

```

23. `React.PureComponent` å’Œ `React.memo` çš„åŒºåˆ«

> ç»§æ‰¿äº†PureComponentï¼Œè¿›è¡Œçš„å°±æ˜¯â€œæµ…â€æ¯”è¾ƒï¼Œå®ƒæ˜¯é€šè¿‡Propå’ŒStateçš„æµ…æ¯”è¾ƒæ¥å®ç°çš„shouldComponentUpdate.
> PureComponentä¸ä»…ä¼šå½±å“æœ¬èº«ï¼Œè€Œä¸”ä¼šå½±å“å­ç»„ä»¶ï¼Œæ‰€ä»¥PureComponentæœ€ä½³æƒ…å†µæ˜¯å±•ç¤ºç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯â€œçº¯â€ç»„ä»¶ã€‚

- `React.PureComponent` é€‚ç”¨äºclassç»„ä»¶ï¼Œæ˜¯ä¸€ä¸ªå°è£…äº†å¯¹æ¯”æœºåˆ¶çš„æ™®é€šç»„ä»¶
- `React.memo` é€‚ç”¨äºå‡½æ•°ç»„ä»¶ï¼Œæ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶

24. ä¸ºä»€ä¹ˆè¦å¼ƒç”¨`ComponetWillreceiveProps`

    1.class ç»„ä»¶æœ¬èº«å°±ä¸å»ºè®®å°† props çš„æ•°æ®ä¿å­˜ä¸€ä»½åˆ°state ä¸­ï¼Œè¿™æ ·ä¼šå¯¼è‡´ state å’Œ props çš„æ•°æ®è€¦åˆèµ·æ¥ï¼›
    2.è¿™ä¸ªæ–¹æ³•å¯ä»¥ä½¿ç”¨ this æ¥æ“ä½œï¼Œå¯èƒ½ä¼šå­˜åœ¨æŸäº›ä½¿ç”¨ setState çš„ç¥å¥‡è„‘å›è·¯ä½¿å¾—æ— é™å¾ªç¯ï¼›
    3.æ‰€ä»¥åé¢ç”¨é™æ€çš„ `static getDerivedStateFromProps` æ¥æ”¶ç¼©è¿™ä¸ªæ—¶é—´é’©å­çš„ä½œç”¨ï¼Œè®©ä»–çœŸçš„éœ€è¦é€šè¿‡ props æ´¾ç”Ÿ state çš„æ—¶å€™æ‰ç”¨ï¼Œä¸€èˆ¬æ—¶å€™ä¸ç”¨å°±ä¸ç”¨äº†
